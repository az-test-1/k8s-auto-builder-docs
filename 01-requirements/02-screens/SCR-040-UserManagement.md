# SCR-040: 사용자 관리

> **Status**: Draft
> **Version**: 1.0.0
> **Last Updated**: 2026-01-13
> **Parent**: [PRD-030-Admin-Dashboard](../01-prd/PRD-030-Admin-Dashboard.md)

---

## 1. 개요

### 1.1 화면 정보
| 항목 | 내용 |
|------|------|
| 화면 ID | SCR-040 |
| 화면명 | 사용자 관리 |
| URL | `/admin/users` |
| 접근 권한 | ADMIN |

### 1.2 목적
시스템 사용자를 관리하고 권한을 설정합니다.

---

## 2. 화면 구성

### 2.1 와이어프레임

```
┌─────────────────────────────────────────────────────────────────┐
│ 사용자 관리                                        [+ 사용자 추가] │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ 🔍 사용자 검색...     │ 역할 [전체 ▼] │ 상태 [전체 ▼]    │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ ☐ │ 사용자        │ 이메일           │ 역할   │ 그룹    │ 상태 │ 액션│
│  ├─────────────────────────────────────────────────────────┤    │
│  │ ☐ │ 👤 홍길동    │ hong@corp.com   │ ADMIN  │ -      │ ✓   │ ⋮  │    │
│  │ ☐ │ 👤 김철수    │ kim@corp.com    │ USER   │ Team A │ ✓   │ ⋮  │    │
│  │ ☐ │ 👤 이영희    │ lee@corp.com    │ USER   │ Team B │ ✓   │ ⋮  │    │
│  │ ☐ │ 👤 박민수    │ park@corp.com   │ VIEWER │ Team A │ ○   │ ⋮  │    │
│  │ ☐ │ 👤 정수연    │ jung@corp.com   │ USER   │ Team C │ ✓   │ ⋮  │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ 선택된 항목: 2개                    [비활성화] [역할 변경] │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │ 총 45명                     ◀ 1 2 3 ... 5 ▶  10개씩 [▼] │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 2.2 사용자 추가/수정 모달

```
┌─────────────────────────────────────┐
│ 사용자 추가                          │
├─────────────────────────────────────┤
│                                     │
│ 이름 *                              │
│ ┌─────────────────────────────────┐ │
│ │                                 │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 이메일 *                            │
│ ┌─────────────────────────────────┐ │
│ │                                 │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 역할 *                              │
│ ┌─────────────────────────────────┐ │
│ │ USER                          ▼ │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 그룹                                │
│ ┌─────────────────────────────────┐ │
│ │ Team A                        ▼ │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ☑ 이메일로 초대장 발송               │
│                                     │
├─────────────────────────────────────┤
│              [취소]  [추가]          │
└─────────────────────────────────────┘
```

### 2.3 사용자 상세 (사이드 패널)

```
┌─────────────────────────────────────┐
│ 👤 홍길동                      [✕]  │
├─────────────────────────────────────┤
│                                     │
│ 기본 정보                           │
│ ─────────────────────────────────   │
│ 이메일: hong@corp.com               │
│ 역할: ADMIN                         │
│ 상태: 활성                          │
│ 가입일: 2026-01-01                  │
│ 최근 로그인: 2026-01-13 10:30       │
│                                     │
│ 소속 그룹                           │
│ ─────────────────────────────────   │
│ (관리자는 모든 그룹 접근 가능)        │
│                                     │
│ 활동 통계                           │
│ ─────────────────────────────────   │
│ 등록 프로젝트: 15개                  │
│ 실행 횟수: 128회                    │
│ 마지막 실행: 30분 전                 │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │  [수정]  [비활성화]  [삭제]      │ │
│ └─────────────────────────────────┘ │
│                                     │
└─────────────────────────────────────┘
```

---

## 3. 기능 정의

### 3.1 목록 조회

| ID | 기능 | 설명 |
|----|------|------|
| F040-01 | 사용자 목록 | 전체 사용자 테이블 표시 |
| F040-02 | 정렬 | 컬럼 헤더 클릭으로 정렬 |
| F040-03 | 페이지네이션 | 페이지 단위 조회 |

### 3.2 검색 및 필터

| ID | 기능 | 설명 |
|----|------|------|
| F040-04 | 텍스트 검색 | 이름, 이메일로 검색 |
| F040-05 | 역할 필터 | ADMIN/USER/VIEWER 필터 |
| F040-06 | 상태 필터 | 활성/비활성 필터 |

### 3.3 사용자 관리

| ID | 기능 | 설명 |
|----|------|------|
| F040-07 | 사용자 추가 | 새 사용자 등록 |
| F040-08 | 사용자 수정 | 사용자 정보 수정 |
| F040-09 | 역할 변경 | 사용자 역할 변경 |
| F040-10 | 그룹 할당 | 사용자 그룹 설정 |
| F040-11 | 비활성화 | 사용자 계정 비활성화 |
| F040-12 | 삭제 | 사용자 삭제 (확인 필요) |

### 3.4 일괄 액션

| ID | 기능 | 설명 |
|----|------|------|
| F040-13 | 전체 선택 | 현재 페이지 전체 선택 |
| F040-14 | 일괄 비활성화 | 선택된 사용자 비활성화 |
| F040-15 | 일괄 역할 변경 | 선택된 사용자 역할 변경 |

### 3.5 상세 정보

| ID | 기능 | 설명 |
|----|------|------|
| F040-16 | 상세 패널 | 사용자 상세 정보 사이드 패널 |
| F040-17 | 활동 통계 | 사용자 활동 요약 |
| F040-18 | 로그인 이력 | 최근 로그인 기록 |

---

## 4. 역할 정의

| 역할 | 코드 | 권한 |
|------|------|------|
| 관리자 | ADMIN | 모든 기능 접근 가능 |
| 사용자 | USER | 프로젝트 관리, 실행 가능 |
| 뷰어 | VIEWER | 조회만 가능 |

---

## 5. API 연동

### 5.1 사용자 목록 조회
```yaml
GET /api/v1/admin/users
Query:
  page: number
  size: number
  search: string (optional)
  role: string (optional)
  status: string (optional)
Response:
  data:
    result: User[]
    pagination: {...}
```

### 5.2 사용자 추가
```yaml
POST /api/v1/admin/users
Body:
  name: string
  email: string
  role: string
  groupId: string (optional)
  sendInvitation: boolean
Response:
  201: Created user
  400: Validation error
  409: Email already exists
```

### 5.3 사용자 수정
```yaml
PUT /api/v1/admin/users/{id}
Body:
  name: string
  role: string
  groupId: string (optional)
Response:
  200: Updated user
  404: Not found
```

### 5.4 사용자 상태 변경
```yaml
PATCH /api/v1/admin/users/{id}/status
Body:
  status: "ACTIVE" | "INACTIVE"
Response:
  200: Updated status
```

### 5.5 사용자 삭제
```yaml
DELETE /api/v1/admin/users/{id}
Response:
  204: No Content
  404: Not Found
```

### 5.6 일괄 역할 변경
```yaml
PATCH /api/v1/admin/users/role
Body:
  ids: string[]
  role: string
Response:
  200:
    updated: number
```

---

## 6. 상태 관리

```typescript
interface UserManagementState {
  users: User[];
  pagination: Pagination;
  selectedIds: string[];
  filters: {
    search: string;
    role: string | null;
    status: string | null;
  };
  selectedUser: User | null;
  isLoading: boolean;
  isModalOpen: boolean;
  modalMode: 'add' | 'edit';
}
```

---

## 7. 삭제 확인 모달

```
┌─────────────────────────────────────┐
│ ⚠️ 사용자 삭제                       │
├─────────────────────────────────────┤
│                                     │
│ 정말로 "홍길동"을 삭제하시겠습니까?   │
│                                     │
│ 이 작업은 되돌릴 수 없으며,          │
│ 해당 사용자의 모든 활동 기록이        │
│ 삭제됩니다.                         │
│                                     │
│ ⚠️ 주의: 등록된 프로젝트 15개는       │
│ 다른 사용자에게 이전됩니다.          │
│                                     │
├─────────────────────────────────────┤
│              [취소]  [삭제]          │
└─────────────────────────────────────┘
```

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.0.0 | 2026-01-13 | 초기 작성 |
