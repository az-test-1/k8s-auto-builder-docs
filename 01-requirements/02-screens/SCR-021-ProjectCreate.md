# SCR-021: 프로젝트 생성

> **Status**: Draft
> **Version**: 1.0.0
> **Last Updated**: 2026-01-13
> **Parent**: [PRD-010-Core-Migration](../prd/PRD-010-Core-Migration.md)

---

## 1. 개요

### 1.1 화면 정보
| 항목 | 내용 |
|------|------|
| 화면 ID | SCR-021 |
| 화면명 | 프로젝트 생성 |
| URL | `/projects/new` |
| 접근 권한 | USER, ADMIN |

### 1.2 목적
새 프로젝트를 등록하고 마이그레이션 설정을 구성합니다.

---

## 2. 필수 입력 요약

### 2.1 필수 필드 한눈에 보기

| 필드명 | 필수 | 조건 | 기본값 |
|--------|:----:|------|--------|
| **name** (프로젝트명) | **Y** | - | - |
| groupId (그룹) | N | - | null |
| description (설명) | N | - | "" |
| **sourceType** (소스 유형) | **Y** | - | GIT |
| **gitUrl** (Git URL) | **Y*** | sourceType=GIT | - |
| gitBranch (브랜치) | N | - | main |
| gitUsername (Git 사용자명) | N* | Private 저장소 | - |
| gitToken (Git 토큰) | N* | Private 저장소 | - |
| **zipFile** (ZIP 파일) | **Y*** | sourceType=ZIP | - |
| **buildTool** (빌드 도구) | **Y** | - | MAVEN |
| **sourceJavaVersion** (소스 Java) | **Y** | - | 8 |
| **targetJavaVersion** (타겟 Java) | **Y** | - | 17 |
| targetSpringVersion (Spring 버전) | N | - | 3.2.x |

> **Y*** = 조건부 필수, **N*** = 조건에 따라 필수가 될 수 있음

### 2.2 소스 유형별 필수 필드

```
┌─────────────────────────────────────────────────────────────┐
│ sourceType = GIT                                            │
├─────────────────────────────────────────────────────────────┤
│ 필수: name, sourceType, gitUrl, buildTool,                  │
│       sourceJavaVersion, targetJavaVersion                  │
│ 선택: groupId, description, gitBranch, targetSpringVersion  │
│ 조건부: gitUsername, gitToken (Private 저장소인 경우 필수)   │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ sourceType = ZIP                                            │
├─────────────────────────────────────────────────────────────┤
│ 필수: name, sourceType, zipFile, buildTool,                 │
│       sourceJavaVersion, targetJavaVersion                  │
│ 선택: groupId, description, targetSpringVersion             │
└─────────────────────────────────────────────────────────────┘
```

### 2.3 버전 조합 규칙

| sourceJavaVersion | 허용 targetJavaVersion | 허용 targetSpringVersion |
|-------------------|------------------------|--------------------------|
| 8 | 11, 17, 21 | 11→없음, 17/21→3.0.x~3.3.x |
| 11 | 17, 21 | 17/21→3.0.x~3.3.x |

---

## 3. 화면 구성

### 3.1 와이어프레임

```
┌─────────────────────────────────────────────────────────────────┐
│ ← 프로젝트 목록                                                  │
│                                                                 │
│                     프로젝트 생성                                │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Step 1: 기본 정보                   Step 2: 소스 설정          │
│  ────●────────────────────────────────○────────────────────     │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │                                                         │    │
│  │  프로젝트명 *                                           │    │
│  │  ┌─────────────────────────────────────────────────┐   │    │
│  │  │ my-legacy-project                               │   │    │
│  │  └─────────────────────────────────────────────────┘   │    │
│  │                                                         │    │
│  │  그룹                                                   │    │
│  │  ┌─────────────────────────────────────────────────┐   │    │
│  │  │ Team A                                        ▼ │   │    │
│  │  └─────────────────────────────────────────────────┘   │    │
│  │                                                         │    │
│  │  설명                                                   │    │
│  │  ┌─────────────────────────────────────────────────┐   │    │
│  │  │ 레거시 프로젝트 마이그레이션                       │   │    │
│  │  │                                                 │   │    │
│  │  └─────────────────────────────────────────────────┘   │    │
│  │                                                         │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │                     [취소]   [다음 →]                    │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 Step 2: 소스 설정

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  Step 1: 기본 정보                   Step 2: 소스 설정          │
│  ────✓────────────────────────────────●────────────────────     │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │                                                         │    │
│  │  소스 유형 *                                            │    │
│  │  ┌───────────────┐  ┌───────────────┐                  │    │
│  │  │ ● Git URL     │  │ ○ ZIP 업로드  │                  │    │
│  │  └───────────────┘  └───────────────┘                  │    │
│  │                                                         │    │
│  │  Git Repository URL *                                   │    │
│  │  ┌─────────────────────────────────────────────────┐   │    │
│  │  │ https://github.com/org/repo.git                 │   │    │
│  │  └─────────────────────────────────────────────────┘   │    │
│  │                                                         │    │
│  │  Branch                                                 │    │
│  │  ┌─────────────────────────────────────────────────┐   │    │
│  │  │ main                                            │   │    │
│  │  └─────────────────────────────────────────────────┘   │    │
│  │                                                         │    │
│  │  ☐ 인증 필요                                           │    │
│  │    ┌─────────────────────────────────────────────┐     │    │
│  │    │ Username: _______________                   │     │    │
│  │    │ Token:    _______________                   │     │    │
│  │    └─────────────────────────────────────────────┘     │    │
│  │                                                         │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  빌드 도구 *                                            │    │
│  │  ┌───────────────┐  ┌───────────────┐                  │    │
│  │  │ ● Maven       │  │ ○ Gradle      │                  │    │
│  │  └───────────────┘  └───────────────┘                  │    │
│  │                                                         │    │
│  │  소스 Java 버전          타겟 Java 버전                 │    │
│  │  ┌─────────────┐         ┌─────────────┐               │    │
│  │  │ Java 8    ▼ │    →    │ Java 17   ▼ │               │    │
│  │  └─────────────┘         └─────────────┘               │    │
│  │                                                         │    │
│  │  타겟 Spring Boot 버전                                  │    │
│  │  ┌─────────────────────────────────────────────────┐   │    │
│  │  │ 3.2.x                                         ▼ │   │    │
│  │  └─────────────────────────────────────────────────┘   │    │
│  │                                                         │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │                 [← 이전]   [생성]                        │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 3.3 ZIP 업로드 선택 시

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  소스 유형 *                                                │
│  ┌───────────────┐  ┌───────────────┐                      │
│  │ ○ Git URL     │  │ ● ZIP 업로드  │                      │
│  └───────────────┘  └───────────────┘                      │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                                                     │   │
│  │       📁 ZIP 파일을 드래그하거나 클릭하여 선택       │   │
│  │                                                     │   │
│  │              최대 1GB, .zip 파일만 가능             │   │
│  │                                                     │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  업로드된 파일: project-source.zip (45.2 MB) [✕ 삭제]       │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 4. 기능 정의

### 4.1 Step 1: 기본 정보

| ID | 기능 | 설명 |
|----|------|------|
| F021-01 | 프로젝트명 입력 | 필수, 중복 체크 |
| F021-02 | 그룹 선택 | 소속 그룹 선택 (옵션) |
| F021-03 | 설명 입력 | 프로젝트 설명 (옵션) |

### 4.2 Step 2: 소스 설정

| ID | 기능 | 설명 |
|----|------|------|
| F021-04 | 소스 유형 선택 | Git URL / ZIP 업로드 |
| F021-05 | Git URL 입력 | HTTPS/SSH URL |
| F021-06 | Branch 입력 | 기본값: main |
| F021-07 | Git 인증 | Username/Token 입력 (옵션) |
| F021-08 | ZIP 업로드 | 드래그앤드롭 또는 파일 선택 |
| F021-09 | 빌드 도구 선택 | Maven / Gradle |
| F021-10 | Java 버전 설정 | 소스/타겟 버전 선택 |
| F021-11 | Spring 버전 설정 | 타겟 Spring Boot 버전 |

### 4.3 공통

| ID | 기능 | 설명 |
|----|------|------|
| F021-12 | 단계 이동 | 이전/다음 버튼 |
| F021-13 | 유효성 검증 | 각 단계 입력값 검증 |
| F021-14 | 생성 | 프로젝트 생성 후 상세 페이지 이동 |
| F021-15 | 취소 | 목록 페이지로 이동 |

---

## 4. 입력 필드 명세

### 4.1 Step 1 필드 요약

| 필드 | 타입 | 필수 | 검증 규칙 |
|------|------|:----:|----------|
| 프로젝트명 | text | Y | 2-50자, 영문/숫자/하이픈 |
| 그룹 | select | N | 사용자 소속 그룹 중 선택 |
| 설명 | textarea | N | 최대 500자 |

### 4.2 Step 2 필드 요약

| 필드 | 타입 | 필수 | 검증 규칙 |
|------|------|:----:|----------|
| 소스 유형 | radio | Y | GIT / ZIP |
| Git URL | text | Y* | 유효한 Git URL |
| Branch | text | N | 기본값: main |
| Git Username | text | N | 인증 시 필수 |
| Git Token | password | N | 인증 시 필수 |
| ZIP 파일 | file | Y* | .zip, 최대 1GB |
| 빌드 도구 | radio | Y | MAVEN / GRADLE |
| 소스 Java | select | Y | 8, 11 |
| 타겟 Java | select | Y | 11, 17, 21 |
| Spring Boot | select | N | 3.0.x, 3.1.x, 3.2.x |

---

## 5. 상세 필드 정의

### 5.1 name (프로젝트명)

| 항목 | 내용 |
|------|------|
| **필드명** | name |
| **한글명** | 프로젝트명 |
| **데이터 타입** | String |
| **필수 여부** | Y |
| **최소 길이** | 2자 |
| **최대 길이** | 50자 |
| **허용 문자** | 영문 소문자(a-z), 숫자(0-9), 하이픈(-) |
| **정규식** | `^[a-z0-9][a-z0-9-]{0,48}[a-z0-9]$` |
| **기본값** | 없음 |
| **고유성** | 시스템 전체에서 유일해야 함 (중복 불가) |
| **정의** | 마이그레이션 대상 프로젝트를 식별하는 고유 이름. 시스템 내에서 프로젝트를 구분하고 참조하는 데 사용됨 |
| **예시** | `my-legacy-app`, `order-service`, `user-api-v2` |
| **제약사항** | - 첫 글자와 마지막 글자는 영문 또는 숫자여야 함<br>- 연속된 하이픈(--)은 불가<br>- 대문자 불가 |

### 5.2 groupId (그룹)

| 항목 | 내용 |
|------|------|
| **필드명** | groupId |
| **한글명** | 그룹 |
| **데이터 타입** | String (UUID) |
| **필수 여부** | N |
| **기본값** | null (그룹 미지정) |
| **참조** | groups 테이블의 id |
| **정의** | 프로젝트가 소속된 조직 그룹. 팀 단위로 프로젝트를 관리하고 접근 권한을 제어하는 데 사용됨 |
| **예시** | `550e8400-e29b-41d4-a716-446655440000` |
| **제약사항** | - 현재 로그인 사용자가 소속된 그룹만 선택 가능<br>- ADMIN은 모든 그룹 선택 가능 |

### 5.3 description (설명)

| 항목 | 내용 |
|------|------|
| **필드명** | description |
| **한글명** | 설명 |
| **데이터 타입** | String (Text) |
| **필수 여부** | N |
| **최대 길이** | 500자 |
| **기본값** | 빈 문자열 ("") |
| **허용 문자** | 모든 유니코드 문자 (특수문자, 한글, 이모지 포함) |
| **정의** | 프로젝트에 대한 부가 설명. 프로젝트의 목적, 특이사항, 마이그레이션 배경 등을 기록 |
| **예시** | `레거시 주문 시스템 Java 17 마이그레이션`, `Spring Boot 3.2 업그레이드 프로젝트` |

### 5.4 sourceType (소스 유형)

| 항목 | 내용 |
|------|------|
| **필드명** | sourceType |
| **한글명** | 소스 유형 |
| **데이터 타입** | Enum (String) |
| **필수 여부** | Y |
| **허용 값** | `GIT`, `ZIP` |
| **기본값** | `GIT` |
| **정의** | 마이그레이션 대상 소스코드의 제공 방식을 지정 |
| **GIT** | Git 저장소 URL을 통해 소스코드를 clone하여 가져옴. 버전 관리 이력 유지 가능 |
| **ZIP** | ZIP 압축 파일을 직접 업로드하여 소스코드 제공. 폐쇄망 환경에서 사용 |

### 5.5 gitUrl (Git Repository URL)

| 항목 | 내용 |
|------|------|
| **필드명** | gitUrl |
| **한글명** | Git Repository URL |
| **데이터 타입** | String (URL) |
| **필수 여부** | Y (sourceType이 GIT인 경우) |
| **최대 길이** | 500자 |
| **허용 형식** | HTTPS URL, SSH URL |
| **정규식 (HTTPS)** | `^https?://[^\s]+\.git$` |
| **정규식 (SSH)** | `^git@[^\s]+:[^\s]+\.git$` |
| **정의** | 소스코드가 저장된 Git 저장소의 URL. 시스템이 이 URL을 통해 소스코드를 clone함 |
| **예시 (HTTPS)** | `https://github.com/myorg/my-project.git` |
| **예시 (SSH)** | `git@github.com:myorg/my-project.git` |
| **제약사항** | - 유효한 Git 저장소 URL이어야 함<br>- Private 저장소는 인증 정보 필요 |

### 5.6 gitBranch (Branch)

| 항목 | 내용 |
|------|------|
| **필드명** | gitBranch |
| **한글명** | 브랜치 |
| **데이터 타입** | String |
| **필수 여부** | N |
| **최대 길이** | 100자 |
| **기본값** | `main` |
| **허용 문자** | 영문, 숫자, 하이픈, 언더스코어, 슬래시 |
| **정규식** | `^[a-zA-Z0-9_/-]+$` |
| **정의** | clone할 Git 브랜치명. 특정 브랜치의 소스코드를 마이그레이션 대상으로 지정 |
| **예시** | `main`, `develop`, `feature/migration`, `release/v2.0` |

### 5.7 gitUsername (Git Username)

| 항목 | 내용 |
|------|------|
| **필드명** | gitUsername |
| **한글명** | Git 사용자명 |
| **데이터 타입** | String |
| **필수 여부** | N (인증 필요 시 Y) |
| **최대 길이** | 100자 |
| **정의** | Private Git 저장소 접근을 위한 사용자명. Basic Auth 또는 Token Auth에 사용 |
| **예시** | `myusername`, `oauth2` (GitHub App 사용 시) |
| **보안** | 저장 시 암호화 처리 |

### 5.8 gitToken (Git Token)

| 항목 | 내용 |
|------|------|
| **필드명** | gitToken |
| **한글명** | Git 토큰 |
| **데이터 타입** | String (Password) |
| **필수 여부** | N (인증 필요 시 Y) |
| **최대 길이** | 500자 |
| **정의** | Private Git 저장소 접근을 위한 인증 토큰. Personal Access Token(PAT) 또는 Deploy Token 사용 |
| **예시 (GitHub)** | `ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx` |
| **예시 (GitLab)** | `glpat-xxxxxxxxxxxxxxxxxxxx` |
| **보안** | - 저장 시 암호화 (AES-256)<br>- UI에서 마스킹 표시<br>- 로그에 기록하지 않음 |
| **권장 권한** | `repo:read` (읽기 권한만 부여 권장) |

### 5.9 zipFile (ZIP 파일)

| 항목 | 내용 |
|------|------|
| **필드명** | zipFile |
| **한글명** | ZIP 파일 |
| **데이터 타입** | File (Binary) |
| **필수 여부** | Y (sourceType이 ZIP인 경우) |
| **허용 확장자** | `.zip` |
| **최대 크기** | 1GB (1,073,741,824 bytes) |
| **MIME 타입** | `application/zip`, `application/x-zip-compressed` |
| **정의** | 마이그레이션 대상 소스코드를 담은 ZIP 압축 파일 |
| **제약사항** | - 압축 파일 루트에 프로젝트 소스가 위치해야 함<br>- pom.xml 또는 build.gradle이 포함되어야 함<br>- 암호 설정된 ZIP 불가 |

### 5.10 buildTool (빌드 도구)

| 항목 | 내용 |
|------|------|
| **필드명** | buildTool |
| **한글명** | 빌드 도구 |
| **데이터 타입** | Enum (String) |
| **필수 여부** | Y |
| **허용 값** | `MAVEN`, `GRADLE` |
| **기본값** | `MAVEN` |
| **정의** | 프로젝트의 빌드 및 의존성 관리 도구를 지정. OpenRewrite 레시피 적용 방식에 영향 |
| **MAVEN** | Apache Maven 기반 프로젝트. pom.xml 파일 필요 |
| **GRADLE** | Gradle 기반 프로젝트. build.gradle 또는 build.gradle.kts 파일 필요 |

### 5.11 sourceJavaVersion (소스 Java 버전)

| 항목 | 내용 |
|------|------|
| **필드명** | sourceJavaVersion |
| **한글명** | 소스 Java 버전 |
| **데이터 타입** | Enum (String) |
| **필수 여부** | Y |
| **허용 값** | `8`, `11` |
| **기본값** | `8` |
| **정의** | 현재 프로젝트가 사용 중인 Java 버전. OpenRewrite 마이그레이션 레시피 선택에 사용 |
| **`8`** | Java 8 (1.8) - LTS, 2014년 출시 |
| **`11`** | Java 11 - LTS, 2018년 출시 |

### 5.12 targetJavaVersion (타겟 Java 버전)

| 항목 | 내용 |
|------|------|
| **필드명** | targetJavaVersion |
| **한글명** | 타겟 Java 버전 |
| **데이터 타입** | Enum (String) |
| **필수 여부** | Y |
| **허용 값** | `11`, `17`, `21` |
| **기본값** | `17` |
| **정의** | 마이그레이션 목표 Java 버전. 이 버전에 맞는 문법과 API로 소스코드가 변환됨 |
| **`11`** | Java 11 - LTS |
| **`17`** | Java 17 - LTS, 2021년 출시 (권장) |
| **`21`** | Java 21 - LTS, 2023년 출시 |
| **제약사항** | targetJavaVersion > sourceJavaVersion 이어야 함 |

### 5.13 targetSpringVersion (타겟 Spring Boot 버전)

| 항목 | 내용 |
|------|------|
| **필드명** | targetSpringVersion |
| **한글명** | 타겟 Spring Boot 버전 |
| **데이터 타입** | Enum (String) |
| **필수 여부** | N |
| **허용 값** | `3.0.x`, `3.1.x`, `3.2.x`, `3.3.x` |
| **기본값** | `3.2.x` |
| **정의** | 마이그레이션 목표 Spring Boot 버전. Spring Boot 프로젝트가 아닌 경우 미지정 가능 |
| **`3.0.x`** | Spring Boot 3.0 - Java 17+ 필수 |
| **`3.1.x`** | Spring Boot 3.1 - Java 17+ 필수 |
| **`3.2.x`** | Spring Boot 3.2 - Java 17+ 필수 (권장) |
| **`3.3.x`** | Spring Boot 3.3 - Java 17+ 필수 |
| **제약사항** | - Spring Boot 3.x는 Java 17 이상 필요<br>- targetJavaVersion이 17 미만이면 선택 불가 |

---

## 6. 필드 조합 규칙

### 6.1 소스 유형별 필수 필드

| sourceType | 필수 필드 | 선택 필드 |
|------------|-----------|-----------|
| GIT | gitUrl | gitBranch, gitUsername, gitToken |
| ZIP | zipFile | - |

### 6.2 Java 버전 조합 규칙

| sourceJavaVersion | 허용되는 targetJavaVersion |
|-------------------|---------------------------|
| 8 | 11, 17, 21 |
| 11 | 17, 21 |

### 6.3 Spring Boot 버전 조합 규칙

| targetJavaVersion | 허용되는 targetSpringVersion |
|-------------------|------------------------------|
| 11 | 선택 불가 (Spring Boot 3.x는 Java 17+ 필요) |
| 17 | 3.0.x, 3.1.x, 3.2.x, 3.3.x |
| 21 | 3.0.x, 3.1.x, 3.2.x, 3.3.x |

---

## 7. API 연동

### 7.1 프로젝트명 중복 체크
```yaml
GET /api/v1/tr/projects/check-name
Query:
  name: string
Response:
  available: boolean
```

### 7.2 프로젝트 생성
```yaml
POST /api/v1/tr/projects
Body:
  name: string
  groupId: string (optional)
  description: string (optional)
  sourceType: "GIT" | "ZIP"
  gitUrl: string (if GIT)
  gitBranch: string (if GIT)
  gitUsername: string (optional)
  gitToken: string (optional)
  buildTool: "MAVEN" | "GRADLE"
  sourceJavaVersion: string
  targetJavaVersion: string
  targetSpringVersion: string (optional)
Response:
  201:
    id: string
    name: string
    ...
  400: Validation error
  409: Name already exists
```

### 7.3 ZIP 파일 업로드
```yaml
POST /api/v1/tr/projects/{id}/upload
Content-Type: multipart/form-data
Body:
  file: binary
Response:
  200:
    uploaded: true
    fileName: string
    fileSize: number
  413: File too large
```

---

## 8. 상태 관리

```typescript
interface CreateProjectState {
  step: 1 | 2;
  form: {
    // Step 1
    name: string;
    groupId: string | null;
    description: string;
    // Step 2
    sourceType: 'GIT' | 'ZIP';
    gitUrl: string;
    gitBranch: string;
    gitUsername: string;
    gitToken: string;
    zipFile: File | null;
    buildTool: 'MAVEN' | 'GRADLE';
    sourceJavaVersion: string;
    targetJavaVersion: string;
    targetSpringVersion: string;
  };
  errors: Record<string, string>;
  isNameAvailable: boolean | null;
  isUploading: boolean;
  uploadProgress: number;
  isSubmitting: boolean;
}
```

---

## 9. 유효성 검증 메시지

| 필드 | 에러 메시지 |
|------|------------|
| 프로젝트명 (빈값) | "프로젝트명을 입력하세요" |
| 프로젝트명 (형식) | "영문, 숫자, 하이픈만 사용 가능합니다" |
| 프로젝트명 (중복) | "이미 사용 중인 프로젝트명입니다" |
| Git URL (빈값) | "Git URL을 입력하세요" |
| Git URL (형식) | "올바른 Git URL 형식이 아닙니다" |
| ZIP 파일 (미선택) | "ZIP 파일을 선택하세요" |
| ZIP 파일 (크기) | "파일 크기는 1GB 이하여야 합니다" |
| ZIP 파일 (형식) | "ZIP 파일만 업로드 가능합니다" |

---

## 10. 생성 완료 후

```
┌─────────────────────────────────────┐
│ ✓ 프로젝트가 생성되었습니다          │
├─────────────────────────────────────┤
│                                     │
│ "my-legacy-project"가 생성되었습니다.│
│                                     │
│ 바로 마이그레이션을 실행하시겠습니까? │
│                                     │
├─────────────────────────────────────┤
│     [나중에]  [지금 실행]            │
└─────────────────────────────────────┘
```

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.0.0 | 2026-01-13 | 초기 작성 |
